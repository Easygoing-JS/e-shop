<?php    //    // Базовый класс контроллера.    //    require_once(dirname(__DIR__) . '/config/vars.config.php');    require_once(dirname(__DIR__) . '/vendor/autoload.php');    abstract class C_Controller    {        // Генерация внешнего шаблона        protected abstract function twig_render();        // Функция отрабатывающая до основного метода        protected abstract function before();        public function Request($action, $id = false)        {            $this->before();       // метод вызывает до формирования данных для шаблона            $this->$action($id);   // $this->action_index  // гоотовим title и content            $this->twig_render();        }        /**         * Запрос произведен методом GET?         * @return bool         */        protected function IsGet()        {            return $_SERVER['REQUEST_METHOD'] == 'GET';        }        /**         * Запрос произведен методом POST?         * @return bool         */        protected function IsPost()        {            return $_SERVER['REQUEST_METHOD'] == 'POST';        }        /**         * Шаблонизатор на основе Twig         * @param $fileName         * @param array $vars         * @return false|string         */        protected function twig_templater($fileName, $vars = array())        {            try {                $loader = new \Twig\Loader\FilesystemLoader(VIEW_DIR);                $twig = new \Twig\Environment($loader);            } catch (Exception $e) {                die('Error: ' . $e->getMessage());            }            try {                $template = $twig->render($fileName, $vars);                ob_start();                echo $template;                return ob_get_clean();            } catch (Exception $e) {                die('Error: ' . $e->getMessage());            }        }        // Если вызвали метод, которого нет — завершаем работу        public function __call($name, $params)        {            die("Отсутсвует вызванный метод!<br>                <a href='index.php'>Вернуться</a>");        }    }