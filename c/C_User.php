<?php    include_once('m/M_User.php');    class C_User extends C_Base    {        public function action_reg()        {            if ($_POST['send_reg']) {                $user = new M_User();                if ($user->regnew()) {                    $this->notification = 'Регистрация прошла успешно.';                } else                    $this->notification = $user->getNote();            }            $this->subtitle .= '::Регистрация';            $this->content = $this->twig_templater('v_reg.twig');        }        public function action_auth()        {            $login = $_POST['login'];            $pass = $_POST['password'];            $user = new M_User();            $user->auth($login, $pass);            $this->subtitle .= '::Авторизация';            $this->content = $this->twig_templater('v_auth.twig');        }        public function action_personal()        {            $login = $_POST['login'];            $pass = $_POST['password'];            $user = new M_User();            if ($user->auth($login, $pass)) {                $this->subtitle .= '::Личный кабинет';                $username = $_SESSION['user'];                $orders = $user->getOrders($this->userID);                $userData = $user->getUserData($this->userID);                $this->content = $this->twig_templater('v_personal.twig', array('username' => $username,                                                                                'orders'   => $orders,                                                                                'userdata' => $userData));            } else {                $this->action_auth();                if ($_POST['send_auth']) {                    if (!$user->auth($login, $pass)) {                        $this->notification = $user->getNote();                    }                }            }        }        public function action_out()        {            $user = new M_User();            $user->out();        }        public function setNotification($notification)        {            $this->notification = $notification;        }        // public function getOrders($user_id)        // {        //     M_PDO::instance();        //        //     $sql = "SELECT o.datetime_create, o.amount, o.destination, os.order_status_name        //             FROM orders o JOIN order_status os ON o.id_order_status = os.id_order_status        //             WHERE id_user = :user_id";        //        //     $params = [        //         ':user_id' => $user_id        //     ];        //     return M_PDO::select($sql, $params);        // }    }